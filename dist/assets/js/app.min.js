/*
Template Name: HUD - Responsive Bootstrap 5 Admin Template
Version: 1.4.0
Author: Sean Ngu
Website: http://www.seantheme.com/hud/
	----------------------------
		APPS CONTENT TABLE
	----------------------------

	<!-- ======== GLOBAL SCRIPT SETTING ======== -->
  01. Global Variable
  02. Handle Scrollbar
  03. Handle Sidebar Menu
  04. Handle Sidebar Scroll Memory
  05. Handle Card Action
  06. Handle Tooltip & Popover Activation
  07. Handle Scroll to Top Button
  08. Handle hexToRgba
  09. Handle Scroll To
  10. Handle Toggle Class
  11. Handle Theme Panel
  12. Application Controller
  13. Initialise
	
	<!-- ======== APPLICATION SETTING ======== -->
	Application Controller
*/

/* 01. Global Variable
------------------------------------------------ */
var app = {
  id: "#app",
  isMobile:
    /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
      navigator.userAgent
    ) || window.innerWidth < 992,
  bootstrap: {
    tooltip: {
      attr: 'data-bs-toggle="tooltip"',
    },
    popover: {
      attr: 'data-bs-toggle="popover"',
    },
    modal: {
      attr: 'data-bs-toggle="modal"',
      dismissAttr: 'data-bs-dismiss="modal"',
      event: {
        hidden: "hidden.bs.modal",
      },
    },
    nav: {
      class: "nav",
      tabs: {
        class: "nav-tabs",
        activeClass: "active",
        itemClass: "nav-item",
        itemLinkClass: "nav-link",
      },
    },
  },
  header: {
    id: "#header",
    class: "app-header",
    hasScrollClass: "has-scroll",
  },
  sidebar: {
    id: "#sidebar",
    class: "app-sidebar",
    scrollBar: {
      localStorage: "appSidebarScrollPosition",
      dom: "",
    },
    menu: {
      class: "menu",
      initAttr: "data-init",
      animationTime: 0,
      itemClass: "menu-item",
      itemLinkClass: "menu-link",
      hasSubClass: "has-sub",
      activeClass: "active",
      expandingClass: "expanding",
      expandClass: "expand",
      submenu: {
        class: "menu-submenu",
      },
    },
    mobile: {
      toggleAttr: 'data-toggle="app-sidebar-mobile"',
      dismissAttr: 'data-dismiss="app-sidebar-mobile"',
      toggledClass: "app-sidebar-mobile-toggled",
      closedClass: "app-sidebar-mobile-closed",
      backdrop: {
        class: "app-sidebar-mobile-backdrop",
      },
    },
    minify: {
      toggleAttr: 'data-toggle="app-sidebar-minify"',
      toggledClass: "app-sidebar-minified",
      cookieName: "app-sidebar-minified",
    },
    floatSubmenu: {
      id: "#app-sidebar-float-submenu",
      dom: "",
      timeout: "",
      class: "app-sidebar-float-submenu",
      container: {
        class: "app-sidebar-float-submenu-container",
      },
      arrow: {
        id: "#app-sidebar-float-submenu-arrow",
        class: "app-sidebar-float-submenu-arrow",
      },
      line: {
        id: "#app-sidebar-float-submenu-line",
        class: "app-sidebar-float-submenu-line",
      },
      overflow: {
        class: "overflow-scroll mh-100vh",
      },
    },
    search: {
      class: "menu-search",
      toggleAttr: 'data-sidebar-search="true"',
      hideClass: "d-none",
      foundClass: "has-text",
    },
    transparent: {
      class: "app-sidebar-transparent",
    },
  },
  scrollBar: {
    attr: 'data-scrollbar="true"',
    skipMobileAttr: "data-skip-mobile",
    heightAttr: "data-height",
    wheelPropagationAttr: "data-wheel-propagation",
  },
  content: {
    id: "#content",
    class: "app-content",
    fullHeight: {
      class: "app-content-full-height",
    },
    fullWidth: {
      class: "app-content-full-width",
    },
  },
  layout: {
    sidebarLight: {
      class: "app-with-light-sidebar",
    },
    sidebarEnd: {
      class: "app-with-end-sidebar",
    },
    sidebarWide: {
      class: "app-with-wide-sidebar",
    },
    sidebarMinified: {
      class: "app-sidebar-minified",
    },
    sidebarTwo: {
      class: "app-with-two-sidebar",
    },
    withoutHeader: {
      class: "app-without-header",
    },
    withoutSidebar: {
      class: "app-without-sidebar",
    },
    topMenu: {
      class: "app-with-top-menu",
    },
    boxedLayout: {
      class: "boxed-layout",
    },
  },
  scrollToTopBtn: {
    showClass: "show",
    heightShow: 200,
    toggleAttr: 'data-toggle="scroll-to-top"',
    scrollSpeed: 500,
  },
  scrollTo: {
    attr: 'data-toggle="scroll-to"',
    target: "data-target",
    linkTarget: "href",
  },
  themePanel: {
    class: "app-theme-panel",
    toggleAttr: 'data-toggle="theme-panel-expand"',
    cookieName: "app-theme-panel-expand",
    activeClass: "active",
    themeListCLass: "app-theme-list",
    themeListItemCLass: "app-theme-list-item",
    themeCoverClass: "app-theme-cover",
    themeCoverItemClass: "app-theme-cover-item",
    theme: {
      toggleAttr: 'data-toggle="theme-selector"',
      classAttr: "data-theme-class",
      cookieName: "app-theme",
      activeClass: "active",
    },
    themeCover: {
      toggleAttr: 'data-toggle="theme-cover-selector"',
      classAttr: "data-theme-cover-class",
      cookieName: "app-theme-cover",
      activeClass: "active",
    },
  },
  dismissClass: {
    toggleAttr: "data-dismiss-class",
    targetAttr: "data-dismiss-target",
  },
  toggleClass: {
    toggleAttr: "data-toggle-class",
    targetAttr: "data-toggle-target",
  },
  font: {
    family: getComputedStyle(document.body).getPropertyValue(
      "--bs-body-font-family"
    ),
    size: getComputedStyle(document.body).getPropertyValue(
      "--bs-body-font-size"
    ),
    weight: getComputedStyle(document.body).getPropertyValue(
      "--bs-body-font-weight"
    ),
  },
  color: {
    theme: getComputedStyle(document.body).getPropertyValue("--bs-theme"),
    blue: getComputedStyle(document.body).getPropertyValue("--bs-blue"),
    green: getComputedStyle(document.body).getPropertyValue("--bs-green"),
    orange: getComputedStyle(document.body).getPropertyValue("--bs-orange"),
    red: getComputedStyle(document.body).getPropertyValue("--bs-red"),
    cyan: getComputedStyle(document.body).getPropertyValue("--bs-cyan"),
    purple: getComputedStyle(document.body).getPropertyValue("--bs-purple"),
    yellow: getComputedStyle(document.body).getPropertyValue("--bs-yellow"),
    indigo: getComputedStyle(document.body).getPropertyValue("--bs-indigo"),
    pink: getComputedStyle(document.body).getPropertyValue("--bs-pink"),
    black: getComputedStyle(document.body).getPropertyValue("--bs-black"),
    white: getComputedStyle(document.body).getPropertyValue("--bs-white"),
    gray: getComputedStyle(document.body).getPropertyValue("--bs-gray"),
    dark: getComputedStyle(document.body).getPropertyValue("--bs-dark"),
    gray100: getComputedStyle(document.body).getPropertyValue("--bs-gray-100"),
    gray200: getComputedStyle(document.body).getPropertyValue("--bs-gray-200"),
    gray300: getComputedStyle(document.body).getPropertyValue("--bs-gray-300"),
    gray400: getComputedStyle(document.body).getPropertyValue("--bs-gray-400"),
    gray500: getComputedStyle(document.body).getPropertyValue("--bs-gray-500"),
    gray600: getComputedStyle(document.body).getPropertyValue("--bs-gray-600"),
    gray700: getComputedStyle(document.body).getPropertyValue("--bs-gray-700"),
    gray800: getComputedStyle(document.body).getPropertyValue("--bs-gray-800"),
    gray900: getComputedStyle(document.body).getPropertyValue("--bs-gray-900"),

    themeRgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-theme-rgb"
    ),
    blueRgb: getComputedStyle(document.body).getPropertyValue("--bs-blue-rgb"),
    greenRgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-green-rgb"
    ),
    orangeRgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-orange-rgb"
    ),
    redRgb: getComputedStyle(document.body).getPropertyValue("--bs-red-rgb"),
    cyanRgb: getComputedStyle(document.body).getPropertyValue("--bs-cyan-rgb"),
    purpleRgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-purple-rgb"
    ),
    yellowRgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-yellow-rgb"
    ),
    indigoRgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-indigo-rgb"
    ),
    pinkRgb: getComputedStyle(document.body).getPropertyValue("--bs-pink-rgb"),
    blackRgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-black-rgb"
    ),
    whiteRgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-white-rgb"
    ),
    grayRgb: getComputedStyle(document.body).getPropertyValue("--bs-gray-rgb"),
    darkRgb: getComputedStyle(document.body).getPropertyValue("--bs-dark-rgb"),
    gray100Rgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-gray-100-rgb"
    ),
    gray200Rgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-gray-200-rgb"
    ),
    gray300Rgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-gray-300-rgb"
    ),
    gray400Rgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-gray-400-rgb"
    ),
    gray500Rgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-gray-500-rgb"
    ),
    gray600Rgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-gray-600-rgb"
    ),
    gray700Rgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-gray-700-rgb"
    ),
    gray800Rgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-gray-800-rgb"
    ),
    gray900Rgb: getComputedStyle(document.body).getPropertyValue(
      "--bs-gray-900-rgb"
    ),
  },
  card: {
    expand: {
      status: false,
      toggleAttr: 'data-toggle="card-expand"',
      toggleTitle: "Expand / Compress",
      class: "card-expand",
    },
  },
  init: {
    attr: "data-init",
  },
};

/* 02. Handle Scrollbar
------------------------------------------------ */
var handleScrollbar = function() {
  "use strict";
  var elms = document.querySelectorAll("[" + app.scrollBar.attr + "]");

  for (var i = 0; i < elms.length; i++) {
    generateScrollbar(elms[i]);
  }
};
var generateScrollbar = function(elm) {
  "use strict";

  if (
    elm.scrollbarInit ||
    (app.isMobile && elm.getAttribute(app.scrollBar.skipMobileAttr))
  ) {
    return;
  }
  var dataHeight = !elm.getAttribute(app.scrollBar.heightAttr)
    ? elm.offsetHeight
    : elm.getAttribute(app.scrollBar.heightAttr);

  elm.style.height = dataHeight;
  elm.scrollbarInit = true;

  if (app.isMobile) {
    elm.style.overflowX = "scroll";
  } else {
    var dataWheelPropagation = elm.getAttribute(
      app.scrollBar.wheelPropagationAttr
    )
      ? elm.getAttribute(app.scrollBar.wheelPropagationAttr)
      : false;

    if (
      elm.closest("." + app.sidebar.class) &&
      elm.closest("." + app.sidebar.class).length !== 0
    ) {
      app.sidebar.scrollBar.dom = new PerfectScrollbar(elm, {
        wheelPropagation: dataWheelPropagation,
      });
    } else {
      new PerfectScrollbar(elm, {
        wheelPropagation: dataWheelPropagation,
      });
    }
  }
  elm.setAttribute(app.init.attr, true);
};

/* 03. Handle Sidebar Menu
------------------------------------------------ */
var handleSidebarMenuToggle = function(menus) {
  menus.map(function(menu) {
    menu.onclick = function(e) {
      e.preventDefault();
      var target = this.nextElementSibling;

      menus.map(function(m) {
        var otherTarget = m.nextElementSibling;
        if (otherTarget !== target) {
          otherTarget.style.display = "none";
          otherTarget
            .closest("." + app.sidebar.menu.itemClass)
            .classList.remove(app.sidebar.menu.expandClass);
        }
      });

      var targetItemElm = target.closest("." + app.sidebar.menu.itemClass);

      if (
        targetItemElm.classList.contains(app.sidebar.menu.expandClass) ||
        (targetItemElm.classList.contains(app.sidebar.menu.activeClass) &&
          !target.style.display)
      ) {
        targetItemElm.classList.remove(app.sidebar.menu.expandClass);
        target.style.display = "none";
      } else {
        targetItemElm.classList.add(app.sidebar.menu.expandClass);
        target.style.display = "block";
      }
    };
  });
};
var handleSidebarMenu = function() {
  "use strict";

  var menuBaseSelector =
    "." +
    app.sidebar.class +
    " ." +
    app.sidebar.menu.class +
    " > ." +
    app.sidebar.menu.itemClass +
    "." +
    app.sidebar.menu.hasSubClass;
  var submenuBaseSelector =
    " > ." +
    app.sidebar.menu.submenu.class +
    " > ." +
    app.sidebar.menu.itemClass +
    "." +
    app.sidebar.menu.hasSubClass;

  // menu
  var menuLinkSelector =
    menuBaseSelector + " > ." + app.sidebar.menu.itemLinkClass;
  var menus = [].slice.call(document.querySelectorAll(menuLinkSelector));
  handleSidebarMenuToggle(menus);

  // submenu lvl 1
  var submenuLvl1Selector = menuBaseSelector + submenuBaseSelector;
  var submenusLvl1 = [].slice.call(
    document.querySelectorAll(
      submenuLvl1Selector + " > ." + app.sidebar.menu.itemLinkClass
    )
  );
  handleSidebarMenuToggle(submenusLvl1);

  // submenu lvl 2
  var submenuLvl2Selector =
    menuBaseSelector + submenuBaseSelector + submenuBaseSelector;
  var submenusLvl2 = [].slice.call(
    document.querySelectorAll(
      submenuLvl2Selector + " > ." + app.sidebar.menu.itemLinkClass
    )
  );
  handleSidebarMenuToggle(submenusLvl2);
};

/* 04. Handle Sidebar Scroll Memory
------------------------------------------------ */
var handleSidebarScrollMemory = function() {
  if (!app.isMobile) {
    try {
      if (
        typeof Storage !== "undefined" &&
        typeof localStorage !== "undefined"
      ) {
        var elm = document.querySelector(
          "." + app.sidebar.class + " [" + app.scrollBar.attr + "]"
        );

        elm.onscroll = function() {
          localStorage.setItem(
            app.sidebar.scrollBar.localStorage,
            this.scrollTop
          );
        };
        var defaultScroll = localStorage.getItem(
          app.sidebar.scrollBar.localStorage
        );
        if (defaultScroll) {
          document.querySelector(
            "." + app.sidebar.class + " [" + app.scrollBar.attr + "]"
          ).scrollTop = defaultScroll;
        }
      }
    } catch (error) {
      console.log(error);
    }
  }
};

/* 05. Handle Card Action
------------------------------------------------ */
var handleCardAction = function() {
  "use strict";

  if (app.card.expand.status) {
    return false;
  }
  app.card.expand.status = true;

  // expand
  var expandTogglerList = [].slice.call(
    document.querySelectorAll("[" + app.card.expand.toggleAttr + "]")
  );
  var expandTogglerTooltipList = expandTogglerList.map(function(
    expandTogglerEl
  ) {
    expandTogglerEl.onclick = function(e) {
      e.preventDefault();

      var target = this.closest(".card");
      var targetClass = app.card.expand.class;
      var targetTop = 40;

      if (
        document.body.classList.contains(targetClass) &&
        target.classList.contains(targetClass)
      ) {
        target.removeAttribute("style");
        target.classList.remove(targetClass);
        document.body.classList.remove(targetClass);
      } else {
        document.body.classList.add(targetClass);
        target.classList.add(targetClass);
      }

      window.dispatchEvent(new Event("resize"));
    };

    return new bootstrap.Tooltip(expandTogglerEl, {
      title: app.card.expand.toggleTitle,
      placement: "bottom",
      trigger: "hover",
      container: "body",
    });
  });
};

/* 06. Handle Tooltip & Popover Activation
------------------------------------------------ */
var handelTooltipPopoverActivation = function() {
  "use strict";

  var tooltipTriggerList = [].slice.call(
    document.querySelectorAll("[" + app.bootstrap.tooltip.attr + "]")
  );
  var tooltipList = tooltipTriggerList.map(function(tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl);
  });

  var popoverTriggerList = [].slice.call(
    document.querySelectorAll("[" + app.bootstrap.popover.attr + "]")
  );
  var popoverList = popoverTriggerList.map(function(popoverTriggerEl) {
    return new bootstrap.Popover(popoverTriggerEl);
  });
};

/* 07. Handle Scroll to Top Button
------------------------------------------------ */
var handleScrollToTopButton = function() {
  "use strict";

  var elmTriggerList = [].slice.call(
    document.querySelectorAll("[" + app.scrollToTopBtn.toggleAttr + "]")
  );

  document.onscroll = function() {
    var doc = document.documentElement;
    var totalScroll =
      (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);
    var elmList = elmTriggerList.map(function(elm) {
      if (totalScroll >= app.scrollToTopBtn.heightShow) {
        if (!elm.classList.contains(app.scrollToTopBtn.showClass)) {
          elm.classList.add(app.scrollToTopBtn.showClass);
        }
      } else {
        elm.classList.remove(app.scrollToTopBtn.showClass);
      }
    });

    var elm = document.querySelectorAll(app.id)[0];

    if (totalScroll > 0) {
      elm.classList.add(app.header.hasScrollClass);
    } else {
      elm.classList.remove(app.header.hasScrollClass);
    }
  };

  var elmList = elmTriggerList.map(function(elm) {
    elm.onclick = function(e) {
      e.preventDefault();

      window.scrollTo({ top: 0, behavior: "smooth" });
    };
  });
};

/* 08. Handle hexToRgba
------------------------------------------------ */
var hexToRgba = function(hex, transparent = 1) {
  var c;
  if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {
    c = hex.substring(1).split("");
    if (c.length == 3) {
      c = [c[0], c[0], c[1], c[1], c[2], c[2]];
    }
    c = "0x" + c.join("");
    return (
      "rgba(" +
      [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(",") +
      "," +
      transparent +
      ")"
    );
  }
  throw new Error("Bad Hex");
};

/* 09. Handle Scroll To
------------------------------------------------ */
var handleScrollTo = function() {
  var elmTriggerList = [].slice.call(
    document.querySelectorAll("[" + app.scrollTo.attr + "]")
  );
  var elmList = elmTriggerList.map(function(elm) {
    elm.onclick = function(e) {
      e.preventDefault();

      var targetAttr = elm.getAttribute(app.scrollTo.target)
        ? this.getAttribute(app.scrollTo.target)
        : this.getAttribute(app.scrollTo.linkTarget);
      var targetElm = document.querySelectorAll(targetAttr)[0];
      var targetHeader = document.querySelectorAll(app.header.id)[0];
      var targetHeight = targetHeader.offsetHeight;
      if (targetElm) {
        var targetTop = targetElm.offsetTop - targetHeight - 24;
        window.scrollTo({ top: targetTop, behavior: "smooth" });
      }
    };
  });
};

/* 10. Handle Toggle Class
------------------------------------------------ */
var handleToggleClass = function() {
  var elmList = [].slice.call(
    document.querySelectorAll("[" + app.toggleClass.toggleAttr + "]")
  );

  elmList.map(function(elm) {
    elm.onclick = function(e) {
      e.preventDefault();

      var targetToggleClass = this.getAttribute(app.toggleClass.toggleAttr);
      var targetDismissClass = this.getAttribute(app.dismissClass.toggleAttr);
      var targetToggleElm = document.querySelector(
        this.getAttribute(app.toggleClass.targetAttr)
      );

      if (!targetDismissClass) {
        if (targetToggleElm.classList.contains(targetToggleClass)) {
          targetToggleElm.classList.remove(targetToggleClass);
        } else {
          targetToggleElm.classList.add(targetToggleClass);
        }
      } else {
        if (
          !targetToggleElm.classList.contains(targetToggleClass) &&
          !targetToggleElm.classList.contains(targetDismissClass)
        ) {
          if (targetToggleElm.classList.contains(targetToggleClass)) {
            targetToggleElm.classList.remove(targetToggleClass);
          } else {
            targetToggleElm.classList.add(targetToggleClass);
          }
        } else {
          if (targetToggleElm.classList.contains(targetToggleClass)) {
            targetToggleElm.classList.remove(targetToggleClass);
          } else {
            targetToggleElm.classList.add(targetToggleClass);
          }
          if (targetToggleElm.classList.contains(targetDismissClass)) {
            targetToggleElm.classList.remove(targetDismissClass);
          } else {
            targetToggleElm.classList.add(targetDismissClass);
          }
        }
      }
    };
  });
};

/* 11. Handle Theme Panel
------------------------------------------------ */
var handleThemePanel = function() {
  "use strict";

  // 12.1 Theme Panel - Toggle / Dismiss
  var elmList = [].slice.call(
    document.querySelectorAll("[" + app.themePanel.toggleAttr + "]")
  );

  elmList.map(function(elm) {
    elm.onclick = function(e) {
      e.preventDefault();

      var targetContainer = document.querySelector("." + app.themePanel.class);
      var targetExpand = false;

      if (targetContainer.classList.contains(app.themePanel.activeClass)) {
        targetContainer.classList.remove(app.themePanel.activeClass);
      } else {
        targetContainer.classList.add(app.themePanel.activeClass);
        targetExpand = true;
      }
      if (Cookies) {
        Cookies.set(app.themePanel.cookieName, targetExpand);
      }
    };
  });

  // 12.2 Theme Panel - Page Load Cookies
  // if (Cookies) {
  //   var themePanelExpand = Cookies.get(app.themePanel.cookieName);

  //   if (themePanelExpand == "true" || typeof themePanelExpand == "undefined") {
  //     var elm = document.querySelector("[" + app.themePanel.toggleAttr + "]");
  //     elm.click();
  //   }
  // }

  // 12.3 Theme Panel - Theme Selector
  var elmList = [].slice.call(
    document.querySelectorAll(
      "." + app.themePanel.class + " [" + app.themePanel.theme.toggleAttr + "]"
    )
  );
  elmList.map(function(elm) {
    elm.onclick = function() {
      for (var x = 0; x < document.body.classList.length; x++) {
        var targetClass = document.body.classList[x];
        if (targetClass.search("theme-") > -1) {
          document.body.classList.remove(targetClass);
        }
      }

      var targetTheme = this.getAttribute(app.themePanel.theme.classAttr);
      var targetThemeList = [].slice.call(
        document.querySelectorAll(
          "." +
            app.themePanel.class +
            " [" +
            app.themePanel.theme.toggleAttr +
            "]"
        )
      );

      if (targetTheme) {
        document.body.classList.add(targetTheme);
      }
      targetThemeList.map(function(targetElm) {
        if (
          targetElm.getAttribute(app.themePanel.theme.classAttr) != targetTheme
        ) {
          targetElm
            .closest("." + app.themePanel.themeListItemCLass)
            .classList.remove(app.themePanel.theme.activeClass);
        }
      });

      this.closest("." + app.themePanel.themeListItemCLass).classList.add(
        app.themePanel.theme.activeClass
      );

      if (Cookies) {
        Cookies.set(app.themePanel.theme.cookieName, targetTheme);
        app.color.theme = getComputedStyle(document.body).getPropertyValue(
          "--bs-theme"
        );
        app.color.themeRgb = getComputedStyle(document.body).getPropertyValue(
          "--bs-theme-rgb"
        );

        document.dispatchEvent(new Event("theme-reload"));
      }
    };
  });

  if (Cookies) {
    if (Cookies.get(app.themePanel.theme.cookieName)) {
      var targetElm = document.querySelector(
        "." +
          app.themePanel.class +
          " [" +
          app.themePanel.theme.toggleAttr +
          "]" +
          "[" +
          app.themePanel.theme.classAttr +
          '="' +
          Cookies.get(app.themePanel.theme.cookieName) +
          '"]'
      );
      targetElm.click();

      app.color.theme = getComputedStyle(document.body).getPropertyValue(
        "--bs-theme"
      );
      app.color.themeRgb = getComputedStyle(document.body).getPropertyValue(
        "--bs-theme-rgb"
      );

      document.dispatchEvent(new Event("theme-reload"));
    }
  }

  // 12.4 Theme Panel - Background Selector
  var elmList = [].slice.call(
    document.querySelectorAll(
      "." +
        app.themePanel.class +
        " [" +
        app.themePanel.themeCover.toggleAttr +
        "]"
    )
  );
  elmList.map(function(elm) {
    elm.onclick = function(e) {
      e.preventDefault();

      var htmlElm = document.querySelector("html");
      var targetTheme = this.getAttribute(app.themePanel.themeCover.classAttr);
      for (var x = 0; x < document.documentElement.classList.length; x++) {
        var targetClass = document.documentElement.classList[x];
        if (targetClass.search("bg-cover-") > -1) {
          htmlElm.classList.remove(targetClass);
        }
      }

      if (targetTheme) {
        htmlElm.classList.add(targetTheme);
      }

      var targetCoverList = [].slice.call(
        document.querySelectorAll(
          "." +
            app.themePanel.class +
            " [" +
            app.themePanel.themeCover.toggleAttr +
            "]"
        )
      );
      targetCoverList.map(function(targetElm) {
        if (
          targetElm.getAttribute(app.themePanel.themeCover.toggleAttr) !=
          targetTheme
        ) {
          targetElm
            .closest("." + app.themePanel.themeCoverItemClass)
            .classList.remove(app.themePanel.themeCover.activeClass);
        }
      });

      this.closest("." + app.themePanel.themeCoverItemClass).classList.add(
        app.themePanel.themeCover.activeClass
      );
      if (Cookies) {
        Cookies.set(app.themePanel.themeCover.cookieName, targetTheme);
      }
    };
  });

  if (Cookies) {
    if (Cookies.get(app.themePanel.themeCover.cookieName)) {
      var targetElm = document.querySelector(
        "." +
          app.themePanel.class +
          " [" +
          app.themePanel.themeCover.toggleAttr +
          "]" +
          "[" +
          app.themePanel.themeCover.classAttr +
          '="' +
          Cookies.get(app.themePanel.themeCover.cookieName) +
          '"]'
      );
      if (targetElm) {
        targetElm.click();
      }
    }
  }
};

/* 12. Application Controller
------------------------------------------------ */
var App = (function() {
  "use strict";

  return {
    //main function
    init: function() {
      this.initComponent();
      this.initSidebar();
    },
    initSidebar: function() {
      handleSidebarMenu();
      handleSidebarScrollMemory();
    },
    initComponent: function() {
      handleScrollbar();
      handleScrollToTopButton();
      handleScrollTo();
      handleCardAction();
      handelTooltipPopoverActivation();
      handleToggleClass();
      handleThemePanel();
    },
    scrollTop: function() {
      window.scrollTo({ top: 0, behavior: "smooth" });
    },
  };
})();

/* 13. Initialise
------------------------------------------------ */
document.addEventListener("DOMContentLoaded", function() {
  App.init();
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcblRlbXBsYXRlIE5hbWU6IEhVRCAtIFJlc3BvbnNpdmUgQm9vdHN0cmFwIDUgQWRtaW4gVGVtcGxhdGVcblZlcnNpb246IDEuNC4wXG5BdXRob3I6IFNlYW4gTmd1XG5XZWJzaXRlOiBodHRwOi8vd3d3LnNlYW50aGVtZS5jb20vaHVkL1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0QVBQUyBDT05URU5UIFRBQkxFXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHQ8IS0tID09PT09PT09IEdMT0JBTCBTQ1JJUFQgU0VUVElORyA9PT09PT09PSAtLT5cbiAgMDEuIEdsb2JhbCBWYXJpYWJsZVxuICAwMi4gSGFuZGxlIFNjcm9sbGJhclxuICAwMy4gSGFuZGxlIFNpZGViYXIgTWVudVxuICAwNC4gSGFuZGxlIFNpZGViYXIgU2Nyb2xsIE1lbW9yeVxuICAwNS4gSGFuZGxlIENhcmQgQWN0aW9uXG4gIDA2LiBIYW5kbGUgVG9vbHRpcCAmIFBvcG92ZXIgQWN0aXZhdGlvblxuICAwNy4gSGFuZGxlIFNjcm9sbCB0byBUb3AgQnV0dG9uXG4gIDA4LiBIYW5kbGUgaGV4VG9SZ2JhXG4gIDA5LiBIYW5kbGUgU2Nyb2xsIFRvXG4gIDEwLiBIYW5kbGUgVG9nZ2xlIENsYXNzXG4gIDExLiBIYW5kbGUgVGhlbWUgUGFuZWxcbiAgMTIuIEFwcGxpY2F0aW9uIENvbnRyb2xsZXJcbiAgMTMuIEluaXRpYWxpc2Vcblx0XG5cdDwhLS0gPT09PT09PT0gQVBQTElDQVRJT04gU0VUVElORyA9PT09PT09PSAtLT5cblx0QXBwbGljYXRpb24gQ29udHJvbGxlclxuKi9cblxuLyogMDEuIEdsb2JhbCBWYXJpYWJsZVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgYXBwID0ge1xuICBpZDogXCIjYXBwXCIsXG4gIGlzTW9iaWxlOlxuICAgIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChcbiAgICAgIG5hdmlnYXRvci51c2VyQWdlbnRcbiAgICApIHx8IHdpbmRvdy5pbm5lcldpZHRoIDwgOTkyLFxuICBib290c3RyYXA6IHtcbiAgICB0b29sdGlwOiB7XG4gICAgICBhdHRyOiAnZGF0YS1icy10b2dnbGU9XCJ0b29sdGlwXCInLFxuICAgIH0sXG4gICAgcG9wb3Zlcjoge1xuICAgICAgYXR0cjogJ2RhdGEtYnMtdG9nZ2xlPVwicG9wb3ZlclwiJyxcbiAgICB9LFxuICAgIG1vZGFsOiB7XG4gICAgICBhdHRyOiAnZGF0YS1icy10b2dnbGU9XCJtb2RhbFwiJyxcbiAgICAgIGRpc21pc3NBdHRyOiAnZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIicsXG4gICAgICBldmVudDoge1xuICAgICAgICBoaWRkZW46IFwiaGlkZGVuLmJzLm1vZGFsXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbmF2OiB7XG4gICAgICBjbGFzczogXCJuYXZcIixcbiAgICAgIHRhYnM6IHtcbiAgICAgICAgY2xhc3M6IFwibmF2LXRhYnNcIixcbiAgICAgICAgYWN0aXZlQ2xhc3M6IFwiYWN0aXZlXCIsXG4gICAgICAgIGl0ZW1DbGFzczogXCJuYXYtaXRlbVwiLFxuICAgICAgICBpdGVtTGlua0NsYXNzOiBcIm5hdi1saW5rXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIGhlYWRlcjoge1xuICAgIGlkOiBcIiNoZWFkZXJcIixcbiAgICBjbGFzczogXCJhcHAtaGVhZGVyXCIsXG4gICAgaGFzU2Nyb2xsQ2xhc3M6IFwiaGFzLXNjcm9sbFwiLFxuICB9LFxuICBzaWRlYmFyOiB7XG4gICAgaWQ6IFwiI3NpZGViYXJcIixcbiAgICBjbGFzczogXCJhcHAtc2lkZWJhclwiLFxuICAgIHNjcm9sbEJhcjoge1xuICAgICAgbG9jYWxTdG9yYWdlOiBcImFwcFNpZGViYXJTY3JvbGxQb3NpdGlvblwiLFxuICAgICAgZG9tOiBcIlwiLFxuICAgIH0sXG4gICAgbWVudToge1xuICAgICAgY2xhc3M6IFwibWVudVwiLFxuICAgICAgaW5pdEF0dHI6IFwiZGF0YS1pbml0XCIsXG4gICAgICBhbmltYXRpb25UaW1lOiAwLFxuICAgICAgaXRlbUNsYXNzOiBcIm1lbnUtaXRlbVwiLFxuICAgICAgaXRlbUxpbmtDbGFzczogXCJtZW51LWxpbmtcIixcbiAgICAgIGhhc1N1YkNsYXNzOiBcImhhcy1zdWJcIixcbiAgICAgIGFjdGl2ZUNsYXNzOiBcImFjdGl2ZVwiLFxuICAgICAgZXhwYW5kaW5nQ2xhc3M6IFwiZXhwYW5kaW5nXCIsXG4gICAgICBleHBhbmRDbGFzczogXCJleHBhbmRcIixcbiAgICAgIHN1Ym1lbnU6IHtcbiAgICAgICAgY2xhc3M6IFwibWVudS1zdWJtZW51XCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbW9iaWxlOiB7XG4gICAgICB0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJhcHAtc2lkZWJhci1tb2JpbGVcIicsXG4gICAgICBkaXNtaXNzQXR0cjogJ2RhdGEtZGlzbWlzcz1cImFwcC1zaWRlYmFyLW1vYmlsZVwiJyxcbiAgICAgIHRvZ2dsZWRDbGFzczogXCJhcHAtc2lkZWJhci1tb2JpbGUtdG9nZ2xlZFwiLFxuICAgICAgY2xvc2VkQ2xhc3M6IFwiYXBwLXNpZGViYXItbW9iaWxlLWNsb3NlZFwiLFxuICAgICAgYmFja2Ryb3A6IHtcbiAgICAgICAgY2xhc3M6IFwiYXBwLXNpZGViYXItbW9iaWxlLWJhY2tkcm9wXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbWluaWZ5OiB7XG4gICAgICB0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJhcHAtc2lkZWJhci1taW5pZnlcIicsXG4gICAgICB0b2dnbGVkQ2xhc3M6IFwiYXBwLXNpZGViYXItbWluaWZpZWRcIixcbiAgICAgIGNvb2tpZU5hbWU6IFwiYXBwLXNpZGViYXItbWluaWZpZWRcIixcbiAgICB9LFxuICAgIGZsb2F0U3VibWVudToge1xuICAgICAgaWQ6IFwiI2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnVcIixcbiAgICAgIGRvbTogXCJcIixcbiAgICAgIHRpbWVvdXQ6IFwiXCIsXG4gICAgICBjbGFzczogXCJhcHAtc2lkZWJhci1mbG9hdC1zdWJtZW51XCIsXG4gICAgICBjb250YWluZXI6IHtcbiAgICAgICAgY2xhc3M6IFwiYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1jb250YWluZXJcIixcbiAgICAgIH0sXG4gICAgICBhcnJvdzoge1xuICAgICAgICBpZDogXCIjYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1hcnJvd1wiLFxuICAgICAgICBjbGFzczogXCJhcHAtc2lkZWJhci1mbG9hdC1zdWJtZW51LWFycm93XCIsXG4gICAgICB9LFxuICAgICAgbGluZToge1xuICAgICAgICBpZDogXCIjYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1saW5lXCIsXG4gICAgICAgIGNsYXNzOiBcImFwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtbGluZVwiLFxuICAgICAgfSxcbiAgICAgIG92ZXJmbG93OiB7XG4gICAgICAgIGNsYXNzOiBcIm92ZXJmbG93LXNjcm9sbCBtaC0xMDB2aFwiLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHNlYXJjaDoge1xuICAgICAgY2xhc3M6IFwibWVudS1zZWFyY2hcIixcbiAgICAgIHRvZ2dsZUF0dHI6ICdkYXRhLXNpZGViYXItc2VhcmNoPVwidHJ1ZVwiJyxcbiAgICAgIGhpZGVDbGFzczogXCJkLW5vbmVcIixcbiAgICAgIGZvdW5kQ2xhc3M6IFwiaGFzLXRleHRcIixcbiAgICB9LFxuICAgIHRyYW5zcGFyZW50OiB7XG4gICAgICBjbGFzczogXCJhcHAtc2lkZWJhci10cmFuc3BhcmVudFwiLFxuICAgIH0sXG4gIH0sXG4gIHNjcm9sbEJhcjoge1xuICAgIGF0dHI6ICdkYXRhLXNjcm9sbGJhcj1cInRydWVcIicsXG4gICAgc2tpcE1vYmlsZUF0dHI6IFwiZGF0YS1za2lwLW1vYmlsZVwiLFxuICAgIGhlaWdodEF0dHI6IFwiZGF0YS1oZWlnaHRcIixcbiAgICB3aGVlbFByb3BhZ2F0aW9uQXR0cjogXCJkYXRhLXdoZWVsLXByb3BhZ2F0aW9uXCIsXG4gIH0sXG4gIGNvbnRlbnQ6IHtcbiAgICBpZDogXCIjY29udGVudFwiLFxuICAgIGNsYXNzOiBcImFwcC1jb250ZW50XCIsXG4gICAgZnVsbEhlaWdodDoge1xuICAgICAgY2xhc3M6IFwiYXBwLWNvbnRlbnQtZnVsbC1oZWlnaHRcIixcbiAgICB9LFxuICAgIGZ1bGxXaWR0aDoge1xuICAgICAgY2xhc3M6IFwiYXBwLWNvbnRlbnQtZnVsbC13aWR0aFwiLFxuICAgIH0sXG4gIH0sXG4gIGxheW91dDoge1xuICAgIHNpZGViYXJMaWdodDoge1xuICAgICAgY2xhc3M6IFwiYXBwLXdpdGgtbGlnaHQtc2lkZWJhclwiLFxuICAgIH0sXG4gICAgc2lkZWJhckVuZDoge1xuICAgICAgY2xhc3M6IFwiYXBwLXdpdGgtZW5kLXNpZGViYXJcIixcbiAgICB9LFxuICAgIHNpZGViYXJXaWRlOiB7XG4gICAgICBjbGFzczogXCJhcHAtd2l0aC13aWRlLXNpZGViYXJcIixcbiAgICB9LFxuICAgIHNpZGViYXJNaW5pZmllZDoge1xuICAgICAgY2xhc3M6IFwiYXBwLXNpZGViYXItbWluaWZpZWRcIixcbiAgICB9LFxuICAgIHNpZGViYXJUd286IHtcbiAgICAgIGNsYXNzOiBcImFwcC13aXRoLXR3by1zaWRlYmFyXCIsXG4gICAgfSxcbiAgICB3aXRob3V0SGVhZGVyOiB7XG4gICAgICBjbGFzczogXCJhcHAtd2l0aG91dC1oZWFkZXJcIixcbiAgICB9LFxuICAgIHdpdGhvdXRTaWRlYmFyOiB7XG4gICAgICBjbGFzczogXCJhcHAtd2l0aG91dC1zaWRlYmFyXCIsXG4gICAgfSxcbiAgICB0b3BNZW51OiB7XG4gICAgICBjbGFzczogXCJhcHAtd2l0aC10b3AtbWVudVwiLFxuICAgIH0sXG4gICAgYm94ZWRMYXlvdXQ6IHtcbiAgICAgIGNsYXNzOiBcImJveGVkLWxheW91dFwiLFxuICAgIH0sXG4gIH0sXG4gIHNjcm9sbFRvVG9wQnRuOiB7XG4gICAgc2hvd0NsYXNzOiBcInNob3dcIixcbiAgICBoZWlnaHRTaG93OiAyMDAsXG4gICAgdG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwic2Nyb2xsLXRvLXRvcFwiJyxcbiAgICBzY3JvbGxTcGVlZDogNTAwLFxuICB9LFxuICBzY3JvbGxUbzoge1xuICAgIGF0dHI6ICdkYXRhLXRvZ2dsZT1cInNjcm9sbC10b1wiJyxcbiAgICB0YXJnZXQ6IFwiZGF0YS10YXJnZXRcIixcbiAgICBsaW5rVGFyZ2V0OiBcImhyZWZcIixcbiAgfSxcbiAgdGhlbWVQYW5lbDoge1xuICAgIGNsYXNzOiBcImFwcC10aGVtZS1wYW5lbFwiLFxuICAgIHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cInRoZW1lLXBhbmVsLWV4cGFuZFwiJyxcbiAgICBjb29raWVOYW1lOiBcImFwcC10aGVtZS1wYW5lbC1leHBhbmRcIixcbiAgICBhY3RpdmVDbGFzczogXCJhY3RpdmVcIixcbiAgICB0aGVtZUxpc3RDTGFzczogXCJhcHAtdGhlbWUtbGlzdFwiLFxuICAgIHRoZW1lTGlzdEl0ZW1DTGFzczogXCJhcHAtdGhlbWUtbGlzdC1pdGVtXCIsXG4gICAgdGhlbWVDb3ZlckNsYXNzOiBcImFwcC10aGVtZS1jb3ZlclwiLFxuICAgIHRoZW1lQ292ZXJJdGVtQ2xhc3M6IFwiYXBwLXRoZW1lLWNvdmVyLWl0ZW1cIixcbiAgICB0aGVtZToge1xuICAgICAgdG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwidGhlbWUtc2VsZWN0b3JcIicsXG4gICAgICBjbGFzc0F0dHI6IFwiZGF0YS10aGVtZS1jbGFzc1wiLFxuICAgICAgY29va2llTmFtZTogXCJhcHAtdGhlbWVcIixcbiAgICAgIGFjdGl2ZUNsYXNzOiBcImFjdGl2ZVwiLFxuICAgIH0sXG4gICAgdGhlbWVDb3Zlcjoge1xuICAgICAgdG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwidGhlbWUtY292ZXItc2VsZWN0b3JcIicsXG4gICAgICBjbGFzc0F0dHI6IFwiZGF0YS10aGVtZS1jb3Zlci1jbGFzc1wiLFxuICAgICAgY29va2llTmFtZTogXCJhcHAtdGhlbWUtY292ZXJcIixcbiAgICAgIGFjdGl2ZUNsYXNzOiBcImFjdGl2ZVwiLFxuICAgIH0sXG4gIH0sXG4gIGRpc21pc3NDbGFzczoge1xuICAgIHRvZ2dsZUF0dHI6IFwiZGF0YS1kaXNtaXNzLWNsYXNzXCIsXG4gICAgdGFyZ2V0QXR0cjogXCJkYXRhLWRpc21pc3MtdGFyZ2V0XCIsXG4gIH0sXG4gIHRvZ2dsZUNsYXNzOiB7XG4gICAgdG9nZ2xlQXR0cjogXCJkYXRhLXRvZ2dsZS1jbGFzc1wiLFxuICAgIHRhcmdldEF0dHI6IFwiZGF0YS10b2dnbGUtdGFyZ2V0XCIsXG4gIH0sXG4gIGZvbnQ6IHtcbiAgICBmYW1pbHk6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgIFwiLS1icy1ib2R5LWZvbnQtZmFtaWx5XCJcbiAgICApLFxuICAgIHNpemU6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgIFwiLS1icy1ib2R5LWZvbnQtc2l6ZVwiXG4gICAgKSxcbiAgICB3ZWlnaHQ6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgIFwiLS1icy1ib2R5LWZvbnQtd2VpZ2h0XCJcbiAgICApLFxuICB9LFxuICBjb2xvcjoge1xuICAgIHRoZW1lOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXCItLWJzLXRoZW1lXCIpLFxuICAgIGJsdWU6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tYnMtYmx1ZVwiKSxcbiAgICBncmVlbjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1ncmVlblwiKSxcbiAgICBvcmFuZ2U6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tYnMtb3JhbmdlXCIpLFxuICAgIHJlZDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1yZWRcIiksXG4gICAgY3lhbjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1jeWFuXCIpLFxuICAgIHB1cnBsZTogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1wdXJwbGVcIiksXG4gICAgeWVsbG93OiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXCItLWJzLXllbGxvd1wiKSxcbiAgICBpbmRpZ286IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tYnMtaW5kaWdvXCIpLFxuICAgIHBpbms6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tYnMtcGlua1wiKSxcbiAgICBibGFjazogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1ibGFja1wiKSxcbiAgICB3aGl0ZTogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy13aGl0ZVwiKSxcbiAgICBncmF5OiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXCItLWJzLWdyYXlcIiksXG4gICAgZGFyazogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1kYXJrXCIpLFxuICAgIGdyYXkxMDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tYnMtZ3JheS0xMDBcIiksXG4gICAgZ3JheTIwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1ncmF5LTIwMFwiKSxcbiAgICBncmF5MzAwOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXCItLWJzLWdyYXktMzAwXCIpLFxuICAgIGdyYXk0MDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tYnMtZ3JheS00MDBcIiksXG4gICAgZ3JheTUwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1ncmF5LTUwMFwiKSxcbiAgICBncmF5NjAwOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXCItLWJzLWdyYXktNjAwXCIpLFxuICAgIGdyYXk3MDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tYnMtZ3JheS03MDBcIiksXG4gICAgZ3JheTgwMDogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1ncmF5LTgwMFwiKSxcbiAgICBncmF5OTAwOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXCItLWJzLWdyYXktOTAwXCIpLFxuXG4gICAgdGhlbWVSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgIFwiLS1icy10aGVtZS1yZ2JcIlxuICAgICksXG4gICAgYmx1ZVJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1ibHVlLXJnYlwiKSxcbiAgICBncmVlblJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgXCItLWJzLWdyZWVuLXJnYlwiXG4gICAgKSxcbiAgICBvcmFuZ2VSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgIFwiLS1icy1vcmFuZ2UtcmdiXCJcbiAgICApLFxuICAgIHJlZFJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1yZWQtcmdiXCIpLFxuICAgIGN5YW5SZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tYnMtY3lhbi1yZ2JcIiksXG4gICAgcHVycGxlUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXG4gICAgICBcIi0tYnMtcHVycGxlLXJnYlwiXG4gICAgKSxcbiAgICB5ZWxsb3dSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgIFwiLS1icy15ZWxsb3ctcmdiXCJcbiAgICApLFxuICAgIGluZGlnb1JnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgXCItLWJzLWluZGlnby1yZ2JcIlxuICAgICksXG4gICAgcGlua1JnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1icy1waW5rLXJnYlwiKSxcbiAgICBibGFja1JnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgXCItLWJzLWJsYWNrLXJnYlwiXG4gICAgKSxcbiAgICB3aGl0ZVJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgXCItLWJzLXdoaXRlLXJnYlwiXG4gICAgKSxcbiAgICBncmF5UmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXCItLWJzLWdyYXktcmdiXCIpLFxuICAgIGRhcmtSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tYnMtZGFyay1yZ2JcIiksXG4gICAgZ3JheTEwMFJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgXCItLWJzLWdyYXktMTAwLXJnYlwiXG4gICAgKSxcbiAgICBncmF5MjAwUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXG4gICAgICBcIi0tYnMtZ3JheS0yMDAtcmdiXCJcbiAgICApLFxuICAgIGdyYXkzMDBSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgIFwiLS1icy1ncmF5LTMwMC1yZ2JcIlxuICAgICksXG4gICAgZ3JheTQwMFJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgXCItLWJzLWdyYXktNDAwLXJnYlwiXG4gICAgKSxcbiAgICBncmF5NTAwUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXG4gICAgICBcIi0tYnMtZ3JheS01MDAtcmdiXCJcbiAgICApLFxuICAgIGdyYXk2MDBSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgIFwiLS1icy1ncmF5LTYwMC1yZ2JcIlxuICAgICksXG4gICAgZ3JheTcwMFJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgXCItLWJzLWdyYXktNzAwLXJnYlwiXG4gICAgKSxcbiAgICBncmF5ODAwUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXG4gICAgICBcIi0tYnMtZ3JheS04MDAtcmdiXCJcbiAgICApLFxuICAgIGdyYXk5MDBSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgIFwiLS1icy1ncmF5LTkwMC1yZ2JcIlxuICAgICksXG4gIH0sXG4gIGNhcmQ6IHtcbiAgICBleHBhbmQ6IHtcbiAgICAgIHN0YXR1czogZmFsc2UsXG4gICAgICB0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJjYXJkLWV4cGFuZFwiJyxcbiAgICAgIHRvZ2dsZVRpdGxlOiBcIkV4cGFuZCAvIENvbXByZXNzXCIsXG4gICAgICBjbGFzczogXCJjYXJkLWV4cGFuZFwiLFxuICAgIH0sXG4gIH0sXG4gIGluaXQ6IHtcbiAgICBhdHRyOiBcImRhdGEtaW5pdFwiLFxuICB9LFxufTtcblxuLyogMDIuIEhhbmRsZSBTY3JvbGxiYXJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVNjcm9sbGJhciA9IGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgdmFyIGVsbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW1wiICsgYXBwLnNjcm9sbEJhci5hdHRyICsgXCJdXCIpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZWxtcy5sZW5ndGg7IGkrKykge1xuICAgIGdlbmVyYXRlU2Nyb2xsYmFyKGVsbXNbaV0pO1xuICB9XG59O1xudmFyIGdlbmVyYXRlU2Nyb2xsYmFyID0gZnVuY3Rpb24oZWxtKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIGlmIChcbiAgICBlbG0uc2Nyb2xsYmFySW5pdCB8fFxuICAgIChhcHAuaXNNb2JpbGUgJiYgZWxtLmdldEF0dHJpYnV0ZShhcHAuc2Nyb2xsQmFyLnNraXBNb2JpbGVBdHRyKSlcbiAgKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBkYXRhSGVpZ2h0ID0gIWVsbS5nZXRBdHRyaWJ1dGUoYXBwLnNjcm9sbEJhci5oZWlnaHRBdHRyKVxuICAgID8gZWxtLm9mZnNldEhlaWdodFxuICAgIDogZWxtLmdldEF0dHJpYnV0ZShhcHAuc2Nyb2xsQmFyLmhlaWdodEF0dHIpO1xuXG4gIGVsbS5zdHlsZS5oZWlnaHQgPSBkYXRhSGVpZ2h0O1xuICBlbG0uc2Nyb2xsYmFySW5pdCA9IHRydWU7XG5cbiAgaWYgKGFwcC5pc01vYmlsZSkge1xuICAgIGVsbS5zdHlsZS5vdmVyZmxvd1ggPSBcInNjcm9sbFwiO1xuICB9IGVsc2Uge1xuICAgIHZhciBkYXRhV2hlZWxQcm9wYWdhdGlvbiA9IGVsbS5nZXRBdHRyaWJ1dGUoXG4gICAgICBhcHAuc2Nyb2xsQmFyLndoZWVsUHJvcGFnYXRpb25BdHRyXG4gICAgKVxuICAgICAgPyBlbG0uZ2V0QXR0cmlidXRlKGFwcC5zY3JvbGxCYXIud2hlZWxQcm9wYWdhdGlvbkF0dHIpXG4gICAgICA6IGZhbHNlO1xuXG4gICAgaWYgKFxuICAgICAgZWxtLmNsb3Nlc3QoXCIuXCIgKyBhcHAuc2lkZWJhci5jbGFzcykgJiZcbiAgICAgIGVsbS5jbG9zZXN0KFwiLlwiICsgYXBwLnNpZGViYXIuY2xhc3MpLmxlbmd0aCAhPT0gMFxuICAgICkge1xuICAgICAgYXBwLnNpZGViYXIuc2Nyb2xsQmFyLmRvbSA9IG5ldyBQZXJmZWN0U2Nyb2xsYmFyKGVsbSwge1xuICAgICAgICB3aGVlbFByb3BhZ2F0aW9uOiBkYXRhV2hlZWxQcm9wYWdhdGlvbixcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgUGVyZmVjdFNjcm9sbGJhcihlbG0sIHtcbiAgICAgICAgd2hlZWxQcm9wYWdhdGlvbjogZGF0YVdoZWVsUHJvcGFnYXRpb24sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZWxtLnNldEF0dHJpYnV0ZShhcHAuaW5pdC5hdHRyLCB0cnVlKTtcbn07XG5cbi8qIDAzLiBIYW5kbGUgU2lkZWJhciBNZW51XG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVTaWRlYmFyTWVudVRvZ2dsZSA9IGZ1bmN0aW9uKG1lbnVzKSB7XG4gIG1lbnVzLm1hcChmdW5jdGlvbihtZW51KSB7XG4gICAgbWVudS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIHRhcmdldCA9IHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgICBtZW51cy5tYXAoZnVuY3Rpb24obSkge1xuICAgICAgICB2YXIgb3RoZXJUYXJnZXQgPSBtLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgaWYgKG90aGVyVGFyZ2V0ICE9PSB0YXJnZXQpIHtcbiAgICAgICAgICBvdGhlclRhcmdldC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgb3RoZXJUYXJnZXRcbiAgICAgICAgICAgIC5jbG9zZXN0KFwiLlwiICsgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MpXG4gICAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHZhciB0YXJnZXRJdGVtRWxtID0gdGFyZ2V0LmNsb3Nlc3QoXCIuXCIgKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGFyZ2V0SXRlbUVsbS5jbGFzc0xpc3QuY29udGFpbnMoYXBwLnNpZGViYXIubWVudS5leHBhbmRDbGFzcykgfHxcbiAgICAgICAgKHRhcmdldEl0ZW1FbG0uY2xhc3NMaXN0LmNvbnRhaW5zKGFwcC5zaWRlYmFyLm1lbnUuYWN0aXZlQ2xhc3MpICYmXG4gICAgICAgICAgIXRhcmdldC5zdHlsZS5kaXNwbGF5KVxuICAgICAgKSB7XG4gICAgICAgIHRhcmdldEl0ZW1FbG0uY2xhc3NMaXN0LnJlbW92ZShhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKTtcbiAgICAgICAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldEl0ZW1FbG0uY2xhc3NMaXN0LmFkZChhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKTtcbiAgICAgICAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG59O1xudmFyIGhhbmRsZVNpZGViYXJNZW51ID0gZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBtZW51QmFzZVNlbGVjdG9yID1cbiAgICBcIi5cIiArXG4gICAgYXBwLnNpZGViYXIuY2xhc3MgK1xuICAgIFwiIC5cIiArXG4gICAgYXBwLnNpZGViYXIubWVudS5jbGFzcyArXG4gICAgXCIgPiAuXCIgK1xuICAgIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzICtcbiAgICBcIi5cIiArXG4gICAgYXBwLnNpZGViYXIubWVudS5oYXNTdWJDbGFzcztcbiAgdmFyIHN1Ym1lbnVCYXNlU2VsZWN0b3IgPVxuICAgIFwiID4gLlwiICtcbiAgICBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MgK1xuICAgIFwiID4gLlwiICtcbiAgICBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArXG4gICAgXCIuXCIgK1xuICAgIGFwcC5zaWRlYmFyLm1lbnUuaGFzU3ViQ2xhc3M7XG5cbiAgLy8gbWVudVxuICB2YXIgbWVudUxpbmtTZWxlY3RvciA9XG4gICAgbWVudUJhc2VTZWxlY3RvciArIFwiID4gLlwiICsgYXBwLnNpZGViYXIubWVudS5pdGVtTGlua0NsYXNzO1xuICB2YXIgbWVudXMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwobWVudUxpbmtTZWxlY3RvcikpO1xuICBoYW5kbGVTaWRlYmFyTWVudVRvZ2dsZShtZW51cyk7XG5cbiAgLy8gc3VibWVudSBsdmwgMVxuICB2YXIgc3VibWVudUx2bDFTZWxlY3RvciA9IG1lbnVCYXNlU2VsZWN0b3IgKyBzdWJtZW51QmFzZVNlbGVjdG9yO1xuICB2YXIgc3VibWVudXNMdmwxID0gW10uc2xpY2UuY2FsbChcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgc3VibWVudUx2bDFTZWxlY3RvciArIFwiID4gLlwiICsgYXBwLnNpZGViYXIubWVudS5pdGVtTGlua0NsYXNzXG4gICAgKVxuICApO1xuICBoYW5kbGVTaWRlYmFyTWVudVRvZ2dsZShzdWJtZW51c0x2bDEpO1xuXG4gIC8vIHN1Ym1lbnUgbHZsIDJcbiAgdmFyIHN1Ym1lbnVMdmwyU2VsZWN0b3IgPVxuICAgIG1lbnVCYXNlU2VsZWN0b3IgKyBzdWJtZW51QmFzZVNlbGVjdG9yICsgc3VibWVudUJhc2VTZWxlY3RvcjtcbiAgdmFyIHN1Ym1lbnVzTHZsMiA9IFtdLnNsaWNlLmNhbGwoXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIHN1Ym1lbnVMdmwyU2VsZWN0b3IgKyBcIiA+IC5cIiArIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUxpbmtDbGFzc1xuICAgIClcbiAgKTtcbiAgaGFuZGxlU2lkZWJhck1lbnVUb2dnbGUoc3VibWVudXNMdmwyKTtcbn07XG5cbi8qIDA0LiBIYW5kbGUgU2lkZWJhciBTY3JvbGwgTWVtb3J5XG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVTaWRlYmFyU2Nyb2xsTWVtb3J5ID0gZnVuY3Rpb24oKSB7XG4gIGlmICghYXBwLmlzTW9iaWxlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIFN0b3JhZ2UgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgdHlwZW9mIGxvY2FsU3RvcmFnZSAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgKSB7XG4gICAgICAgIHZhciBlbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIFwiLlwiICsgYXBwLnNpZGViYXIuY2xhc3MgKyBcIiBbXCIgKyBhcHAuc2Nyb2xsQmFyLmF0dHIgKyBcIl1cIlxuICAgICAgICApO1xuXG4gICAgICAgIGVsbS5vbnNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAgICAgYXBwLnNpZGViYXIuc2Nyb2xsQmFyLmxvY2FsU3RvcmFnZSxcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9wXG4gICAgICAgICAgKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGRlZmF1bHRTY3JvbGwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcbiAgICAgICAgICBhcHAuc2lkZWJhci5zY3JvbGxCYXIubG9jYWxTdG9yYWdlXG4gICAgICAgICk7XG4gICAgICAgIGlmIChkZWZhdWx0U2Nyb2xsKSB7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIFwiLlwiICsgYXBwLnNpZGViYXIuY2xhc3MgKyBcIiBbXCIgKyBhcHAuc2Nyb2xsQmFyLmF0dHIgKyBcIl1cIlxuICAgICAgICAgICkuc2Nyb2xsVG9wID0gZGVmYXVsdFNjcm9sbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfVxuICB9XG59O1xuXG4vKiAwNS4gSGFuZGxlIENhcmQgQWN0aW9uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVDYXJkQWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIGlmIChhcHAuY2FyZC5leHBhbmQuc3RhdHVzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGFwcC5jYXJkLmV4cGFuZC5zdGF0dXMgPSB0cnVlO1xuXG4gIC8vIGV4cGFuZFxuICB2YXIgZXhwYW5kVG9nZ2xlckxpc3QgPSBbXS5zbGljZS5jYWxsKFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIgKyBhcHAuY2FyZC5leHBhbmQudG9nZ2xlQXR0ciArIFwiXVwiKVxuICApO1xuICB2YXIgZXhwYW5kVG9nZ2xlclRvb2x0aXBMaXN0ID0gZXhwYW5kVG9nZ2xlckxpc3QubWFwKGZ1bmN0aW9uKFxuICAgIGV4cGFuZFRvZ2dsZXJFbFxuICApIHtcbiAgICBleHBhbmRUb2dnbGVyRWwub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgdmFyIHRhcmdldCA9IHRoaXMuY2xvc2VzdChcIi5jYXJkXCIpO1xuICAgICAgdmFyIHRhcmdldENsYXNzID0gYXBwLmNhcmQuZXhwYW5kLmNsYXNzO1xuICAgICAgdmFyIHRhcmdldFRvcCA9IDQwO1xuXG4gICAgICBpZiAoXG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKHRhcmdldENsYXNzKSAmJlxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHRhcmdldENsYXNzKVxuICAgICAgKSB7XG4gICAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUodGFyZ2V0Q2xhc3MpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUodGFyZ2V0Q2xhc3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKHRhcmdldENsYXNzKTtcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQodGFyZ2V0Q2xhc3MpO1xuICAgICAgfVxuXG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJyZXNpemVcIikpO1xuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IGJvb3RzdHJhcC5Ub29sdGlwKGV4cGFuZFRvZ2dsZXJFbCwge1xuICAgICAgdGl0bGU6IGFwcC5jYXJkLmV4cGFuZC50b2dnbGVUaXRsZSxcbiAgICAgIHBsYWNlbWVudDogXCJib3R0b21cIixcbiAgICAgIHRyaWdnZXI6IFwiaG92ZXJcIixcbiAgICAgIGNvbnRhaW5lcjogXCJib2R5XCIsXG4gICAgfSk7XG4gIH0pO1xufTtcblxuLyogMDYuIEhhbmRsZSBUb29sdGlwICYgUG9wb3ZlciBBY3RpdmF0aW9uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kZWxUb29sdGlwUG9wb3ZlckFjdGl2YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHRvb2x0aXBUcmlnZ2VyTGlzdCA9IFtdLnNsaWNlLmNhbGwoXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltcIiArIGFwcC5ib290c3RyYXAudG9vbHRpcC5hdHRyICsgXCJdXCIpXG4gICk7XG4gIHZhciB0b29sdGlwTGlzdCA9IHRvb2x0aXBUcmlnZ2VyTGlzdC5tYXAoZnVuY3Rpb24odG9vbHRpcFRyaWdnZXJFbCkge1xuICAgIHJldHVybiBuZXcgYm9vdHN0cmFwLlRvb2x0aXAodG9vbHRpcFRyaWdnZXJFbCk7XG4gIH0pO1xuXG4gIHZhciBwb3BvdmVyVHJpZ2dlckxpc3QgPSBbXS5zbGljZS5jYWxsKFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIgKyBhcHAuYm9vdHN0cmFwLnBvcG92ZXIuYXR0ciArIFwiXVwiKVxuICApO1xuICB2YXIgcG9wb3Zlckxpc3QgPSBwb3BvdmVyVHJpZ2dlckxpc3QubWFwKGZ1bmN0aW9uKHBvcG92ZXJUcmlnZ2VyRWwpIHtcbiAgICByZXR1cm4gbmV3IGJvb3RzdHJhcC5Qb3BvdmVyKHBvcG92ZXJUcmlnZ2VyRWwpO1xuICB9KTtcbn07XG5cbi8qIDA3LiBIYW5kbGUgU2Nyb2xsIHRvIFRvcCBCdXR0b25cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVNjcm9sbFRvVG9wQnV0dG9uID0gZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBlbG1UcmlnZ2VyTGlzdCA9IFtdLnNsaWNlLmNhbGwoXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltcIiArIGFwcC5zY3JvbGxUb1RvcEJ0bi50b2dnbGVBdHRyICsgXCJdXCIpXG4gICk7XG5cbiAgZG9jdW1lbnQub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIHZhciB0b3RhbFNjcm9sbCA9XG4gICAgICAod2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvYy5zY3JvbGxUb3ApIC0gKGRvYy5jbGllbnRUb3AgfHwgMCk7XG4gICAgdmFyIGVsbUxpc3QgPSBlbG1UcmlnZ2VyTGlzdC5tYXAoZnVuY3Rpb24oZWxtKSB7XG4gICAgICBpZiAodG90YWxTY3JvbGwgPj0gYXBwLnNjcm9sbFRvVG9wQnRuLmhlaWdodFNob3cpIHtcbiAgICAgICAgaWYgKCFlbG0uY2xhc3NMaXN0LmNvbnRhaW5zKGFwcC5zY3JvbGxUb1RvcEJ0bi5zaG93Q2xhc3MpKSB7XG4gICAgICAgICAgZWxtLmNsYXNzTGlzdC5hZGQoYXBwLnNjcm9sbFRvVG9wQnRuLnNob3dDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsbS5jbGFzc0xpc3QucmVtb3ZlKGFwcC5zY3JvbGxUb1RvcEJ0bi5zaG93Q2xhc3MpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXBwLmlkKVswXTtcblxuICAgIGlmICh0b3RhbFNjcm9sbCA+IDApIHtcbiAgICAgIGVsbS5jbGFzc0xpc3QuYWRkKGFwcC5oZWFkZXIuaGFzU2Nyb2xsQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbG0uY2xhc3NMaXN0LnJlbW92ZShhcHAuaGVhZGVyLmhhc1Njcm9sbENsYXNzKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGVsbUxpc3QgPSBlbG1UcmlnZ2VyTGlzdC5tYXAoZnVuY3Rpb24oZWxtKSB7XG4gICAgZWxtLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHdpbmRvdy5zY3JvbGxUbyh7IHRvcDogMCwgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gICAgfTtcbiAgfSk7XG59O1xuXG4vKiAwOC4gSGFuZGxlIGhleFRvUmdiYVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgaGV4VG9SZ2JhID0gZnVuY3Rpb24oaGV4LCB0cmFuc3BhcmVudCA9IDEpIHtcbiAgdmFyIGM7XG4gIGlmICgvXiMoW0EtRmEtZjAtOV17M30pezEsMn0kLy50ZXN0KGhleCkpIHtcbiAgICBjID0gaGV4LnN1YnN0cmluZygxKS5zcGxpdChcIlwiKTtcbiAgICBpZiAoYy5sZW5ndGggPT0gMykge1xuICAgICAgYyA9IFtjWzBdLCBjWzBdLCBjWzFdLCBjWzFdLCBjWzJdLCBjWzJdXTtcbiAgICB9XG4gICAgYyA9IFwiMHhcIiArIGMuam9pbihcIlwiKTtcbiAgICByZXR1cm4gKFxuICAgICAgXCJyZ2JhKFwiICtcbiAgICAgIFsoYyA+PiAxNikgJiAyNTUsIChjID4+IDgpICYgMjU1LCBjICYgMjU1XS5qb2luKFwiLFwiKSArXG4gICAgICBcIixcIiArXG4gICAgICB0cmFuc3BhcmVudCArXG4gICAgICBcIilcIlxuICAgICk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFwiQmFkIEhleFwiKTtcbn07XG5cbi8qIDA5LiBIYW5kbGUgU2Nyb2xsIFRvXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVTY3JvbGxUbyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZWxtVHJpZ2dlckxpc3QgPSBbXS5zbGljZS5jYWxsKFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIgKyBhcHAuc2Nyb2xsVG8uYXR0ciArIFwiXVwiKVxuICApO1xuICB2YXIgZWxtTGlzdCA9IGVsbVRyaWdnZXJMaXN0Lm1hcChmdW5jdGlvbihlbG0pIHtcbiAgICBlbG0ub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgdmFyIHRhcmdldEF0dHIgPSBlbG0uZ2V0QXR0cmlidXRlKGFwcC5zY3JvbGxUby50YXJnZXQpXG4gICAgICAgID8gdGhpcy5nZXRBdHRyaWJ1dGUoYXBwLnNjcm9sbFRvLnRhcmdldClcbiAgICAgICAgOiB0aGlzLmdldEF0dHJpYnV0ZShhcHAuc2Nyb2xsVG8ubGlua1RhcmdldCk7XG4gICAgICB2YXIgdGFyZ2V0RWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0YXJnZXRBdHRyKVswXTtcbiAgICAgIHZhciB0YXJnZXRIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFwcC5oZWFkZXIuaWQpWzBdO1xuICAgICAgdmFyIHRhcmdldEhlaWdodCA9IHRhcmdldEhlYWRlci5vZmZzZXRIZWlnaHQ7XG4gICAgICBpZiAodGFyZ2V0RWxtKSB7XG4gICAgICAgIHZhciB0YXJnZXRUb3AgPSB0YXJnZXRFbG0ub2Zmc2V0VG9wIC0gdGFyZ2V0SGVpZ2h0IC0gMjQ7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7IHRvcDogdGFyZ2V0VG9wLCBiZWhhdmlvcjogXCJzbW9vdGhcIiB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbn07XG5cbi8qIDEwLiBIYW5kbGUgVG9nZ2xlIENsYXNzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVUb2dnbGVDbGFzcyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZWxtTGlzdCA9IFtdLnNsaWNlLmNhbGwoXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltcIiArIGFwcC50b2dnbGVDbGFzcy50b2dnbGVBdHRyICsgXCJdXCIpXG4gICk7XG5cbiAgZWxtTGlzdC5tYXAoZnVuY3Rpb24oZWxtKSB7XG4gICAgZWxtLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHZhciB0YXJnZXRUb2dnbGVDbGFzcyA9IHRoaXMuZ2V0QXR0cmlidXRlKGFwcC50b2dnbGVDbGFzcy50b2dnbGVBdHRyKTtcbiAgICAgIHZhciB0YXJnZXREaXNtaXNzQ2xhc3MgPSB0aGlzLmdldEF0dHJpYnV0ZShhcHAuZGlzbWlzc0NsYXNzLnRvZ2dsZUF0dHIpO1xuICAgICAgdmFyIHRhcmdldFRvZ2dsZUVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIHRoaXMuZ2V0QXR0cmlidXRlKGFwcC50b2dnbGVDbGFzcy50YXJnZXRBdHRyKVxuICAgICAgKTtcblxuICAgICAgaWYgKCF0YXJnZXREaXNtaXNzQ2xhc3MpIHtcbiAgICAgICAgaWYgKHRhcmdldFRvZ2dsZUVsbS5jbGFzc0xpc3QuY29udGFpbnModGFyZ2V0VG9nZ2xlQ2xhc3MpKSB7XG4gICAgICAgICAgdGFyZ2V0VG9nZ2xlRWxtLmNsYXNzTGlzdC5yZW1vdmUodGFyZ2V0VG9nZ2xlQ2xhc3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldFRvZ2dsZUVsbS5jbGFzc0xpc3QuYWRkKHRhcmdldFRvZ2dsZUNsYXNzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICF0YXJnZXRUb2dnbGVFbG0uY2xhc3NMaXN0LmNvbnRhaW5zKHRhcmdldFRvZ2dsZUNsYXNzKSAmJlxuICAgICAgICAgICF0YXJnZXRUb2dnbGVFbG0uY2xhc3NMaXN0LmNvbnRhaW5zKHRhcmdldERpc21pc3NDbGFzcylcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHRhcmdldFRvZ2dsZUVsbS5jbGFzc0xpc3QuY29udGFpbnModGFyZ2V0VG9nZ2xlQ2xhc3MpKSB7XG4gICAgICAgICAgICB0YXJnZXRUb2dnbGVFbG0uY2xhc3NMaXN0LnJlbW92ZSh0YXJnZXRUb2dnbGVDbGFzcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldFRvZ2dsZUVsbS5jbGFzc0xpc3QuYWRkKHRhcmdldFRvZ2dsZUNsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHRhcmdldFRvZ2dsZUVsbS5jbGFzc0xpc3QuY29udGFpbnModGFyZ2V0VG9nZ2xlQ2xhc3MpKSB7XG4gICAgICAgICAgICB0YXJnZXRUb2dnbGVFbG0uY2xhc3NMaXN0LnJlbW92ZSh0YXJnZXRUb2dnbGVDbGFzcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldFRvZ2dsZUVsbS5jbGFzc0xpc3QuYWRkKHRhcmdldFRvZ2dsZUNsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRhcmdldFRvZ2dsZUVsbS5jbGFzc0xpc3QuY29udGFpbnModGFyZ2V0RGlzbWlzc0NsYXNzKSkge1xuICAgICAgICAgICAgdGFyZ2V0VG9nZ2xlRWxtLmNsYXNzTGlzdC5yZW1vdmUodGFyZ2V0RGlzbWlzc0NsYXNzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0VG9nZ2xlRWxtLmNsYXNzTGlzdC5hZGQodGFyZ2V0RGlzbWlzc0NsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbn07XG5cbi8qIDExLiBIYW5kbGUgVGhlbWUgUGFuZWxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVRoZW1lUGFuZWwgPSBmdW5jdGlvbigpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gMTIuMSBUaGVtZSBQYW5lbCAtIFRvZ2dsZSAvIERpc21pc3NcbiAgdmFyIGVsbUxpc3QgPSBbXS5zbGljZS5jYWxsKFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIgKyBhcHAudGhlbWVQYW5lbC50b2dnbGVBdHRyICsgXCJdXCIpXG4gICk7XG5cbiAgZWxtTGlzdC5tYXAoZnVuY3Rpb24oZWxtKSB7XG4gICAgZWxtLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHZhciB0YXJnZXRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlwiICsgYXBwLnRoZW1lUGFuZWwuY2xhc3MpO1xuICAgICAgdmFyIHRhcmdldEV4cGFuZCA9IGZhbHNlO1xuXG4gICAgICBpZiAodGFyZ2V0Q29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhhcHAudGhlbWVQYW5lbC5hY3RpdmVDbGFzcykpIHtcbiAgICAgICAgdGFyZ2V0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoYXBwLnRoZW1lUGFuZWwuYWN0aXZlQ2xhc3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoYXBwLnRoZW1lUGFuZWwuYWN0aXZlQ2xhc3MpO1xuICAgICAgICB0YXJnZXRFeHBhbmQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKENvb2tpZXMpIHtcbiAgICAgICAgQ29va2llcy5zZXQoYXBwLnRoZW1lUGFuZWwuY29va2llTmFtZSwgdGFyZ2V0RXhwYW5kKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcblxuICAvLyAxMi4yIFRoZW1lIFBhbmVsIC0gUGFnZSBMb2FkIENvb2tpZXNcbiAgLy8gaWYgKENvb2tpZXMpIHtcbiAgLy8gICB2YXIgdGhlbWVQYW5lbEV4cGFuZCA9IENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLmNvb2tpZU5hbWUpO1xuXG4gIC8vICAgaWYgKHRoZW1lUGFuZWxFeHBhbmQgPT0gXCJ0cnVlXCIgfHwgdHlwZW9mIHRoZW1lUGFuZWxFeHBhbmQgPT0gXCJ1bmRlZmluZWRcIikge1xuICAvLyAgICAgdmFyIGVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbXCIgKyBhcHAudGhlbWVQYW5lbC50b2dnbGVBdHRyICsgXCJdXCIpO1xuICAvLyAgICAgZWxtLmNsaWNrKCk7XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgLy8gMTIuMyBUaGVtZSBQYW5lbCAtIFRoZW1lIFNlbGVjdG9yXG4gIHZhciBlbG1MaXN0ID0gW10uc2xpY2UuY2FsbChcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgXCIuXCIgKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArIFwiIFtcIiArIGFwcC50aGVtZVBhbmVsLnRoZW1lLnRvZ2dsZUF0dHIgKyBcIl1cIlxuICAgIClcbiAgKTtcbiAgZWxtTGlzdC5tYXAoZnVuY3Rpb24oZWxtKSB7XG4gICAgZWxtLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgdmFyIHRhcmdldENsYXNzID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3RbeF07XG4gICAgICAgIGlmICh0YXJnZXRDbGFzcy5zZWFyY2goXCJ0aGVtZS1cIikgPiAtMSkge1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSh0YXJnZXRDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHRhcmdldFRoZW1lID0gdGhpcy5nZXRBdHRyaWJ1dGUoYXBwLnRoZW1lUGFuZWwudGhlbWUuY2xhc3NBdHRyKTtcbiAgICAgIHZhciB0YXJnZXRUaGVtZUxpc3QgPSBbXS5zbGljZS5jYWxsKFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgICAgIFwiLlwiICtcbiAgICAgICAgICAgIGFwcC50aGVtZVBhbmVsLmNsYXNzICtcbiAgICAgICAgICAgIFwiIFtcIiArXG4gICAgICAgICAgICBhcHAudGhlbWVQYW5lbC50aGVtZS50b2dnbGVBdHRyICtcbiAgICAgICAgICAgIFwiXVwiXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIGlmICh0YXJnZXRUaGVtZSkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQodGFyZ2V0VGhlbWUpO1xuICAgICAgfVxuICAgICAgdGFyZ2V0VGhlbWVMaXN0Lm1hcChmdW5jdGlvbih0YXJnZXRFbG0pIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRhcmdldEVsbS5nZXRBdHRyaWJ1dGUoYXBwLnRoZW1lUGFuZWwudGhlbWUuY2xhc3NBdHRyKSAhPSB0YXJnZXRUaGVtZVxuICAgICAgICApIHtcbiAgICAgICAgICB0YXJnZXRFbG1cbiAgICAgICAgICAgIC5jbG9zZXN0KFwiLlwiICsgYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0SXRlbUNMYXNzKVxuICAgICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoYXBwLnRoZW1lUGFuZWwudGhlbWUuYWN0aXZlQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5jbG9zZXN0KFwiLlwiICsgYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0SXRlbUNMYXNzKS5jbGFzc0xpc3QuYWRkKFxuICAgICAgICBhcHAudGhlbWVQYW5lbC50aGVtZS5hY3RpdmVDbGFzc1xuICAgICAgKTtcblxuICAgICAgaWYgKENvb2tpZXMpIHtcbiAgICAgICAgQ29va2llcy5zZXQoYXBwLnRoZW1lUGFuZWwudGhlbWUuY29va2llTmFtZSwgdGFyZ2V0VGhlbWUpO1xuICAgICAgICBhcHAuY29sb3IudGhlbWUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXG4gICAgICAgICAgXCItLWJzLXRoZW1lXCJcbiAgICAgICAgKTtcbiAgICAgICAgYXBwLmNvbG9yLnRoZW1lUmdiID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgICAgIFwiLS1icy10aGVtZS1yZ2JcIlxuICAgICAgICApO1xuXG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwidGhlbWUtcmVsb2FkXCIpKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcblxuICBpZiAoQ29va2llcykge1xuICAgIGlmIChDb29raWVzLmdldChhcHAudGhlbWVQYW5lbC50aGVtZS5jb29raWVOYW1lKSkge1xuICAgICAgdmFyIHRhcmdldEVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIFwiLlwiICtcbiAgICAgICAgICBhcHAudGhlbWVQYW5lbC5jbGFzcyArXG4gICAgICAgICAgXCIgW1wiICtcbiAgICAgICAgICBhcHAudGhlbWVQYW5lbC50aGVtZS50b2dnbGVBdHRyICtcbiAgICAgICAgICBcIl1cIiArXG4gICAgICAgICAgXCJbXCIgK1xuICAgICAgICAgIGFwcC50aGVtZVBhbmVsLnRoZW1lLmNsYXNzQXR0ciArXG4gICAgICAgICAgJz1cIicgK1xuICAgICAgICAgIENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lLmNvb2tpZU5hbWUpICtcbiAgICAgICAgICAnXCJdJ1xuICAgICAgKTtcbiAgICAgIHRhcmdldEVsbS5jbGljaygpO1xuXG4gICAgICBhcHAuY29sb3IudGhlbWUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXG4gICAgICAgIFwiLS1icy10aGVtZVwiXG4gICAgICApO1xuICAgICAgYXBwLmNvbG9yLnRoZW1lUmdiID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgICBcIi0tYnMtdGhlbWUtcmdiXCJcbiAgICAgICk7XG5cbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwidGhlbWUtcmVsb2FkXCIpKTtcbiAgICB9XG4gIH1cblxuICAvLyAxMi40IFRoZW1lIFBhbmVsIC0gQmFja2dyb3VuZCBTZWxlY3RvclxuICB2YXIgZWxtTGlzdCA9IFtdLnNsaWNlLmNhbGwoXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIFwiLlwiICtcbiAgICAgICAgYXBwLnRoZW1lUGFuZWwuY2xhc3MgK1xuICAgICAgICBcIiBbXCIgK1xuICAgICAgICBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLnRvZ2dsZUF0dHIgK1xuICAgICAgICBcIl1cIlxuICAgIClcbiAgKTtcbiAgZWxtTGlzdC5tYXAoZnVuY3Rpb24oZWxtKSB7XG4gICAgZWxtLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHZhciBodG1sRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImh0bWxcIik7XG4gICAgICB2YXIgdGFyZ2V0VGhlbWUgPSB0aGlzLmdldEF0dHJpYnV0ZShhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLmNsYXNzQXR0cik7XG4gICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgdmFyIHRhcmdldENsYXNzID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdFt4XTtcbiAgICAgICAgaWYgKHRhcmdldENsYXNzLnNlYXJjaChcImJnLWNvdmVyLVwiKSA+IC0xKSB7XG4gICAgICAgICAgaHRtbEVsbS5jbGFzc0xpc3QucmVtb3ZlKHRhcmdldENsYXNzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGFyZ2V0VGhlbWUpIHtcbiAgICAgICAgaHRtbEVsbS5jbGFzc0xpc3QuYWRkKHRhcmdldFRoZW1lKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRhcmdldENvdmVyTGlzdCA9IFtdLnNsaWNlLmNhbGwoXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgICAgXCIuXCIgK1xuICAgICAgICAgICAgYXBwLnRoZW1lUGFuZWwuY2xhc3MgK1xuICAgICAgICAgICAgXCIgW1wiICtcbiAgICAgICAgICAgIGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIudG9nZ2xlQXR0ciArXG4gICAgICAgICAgICBcIl1cIlxuICAgICAgICApXG4gICAgICApO1xuICAgICAgdGFyZ2V0Q292ZXJMaXN0Lm1hcChmdW5jdGlvbih0YXJnZXRFbG0pIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRhcmdldEVsbS5nZXRBdHRyaWJ1dGUoYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci50b2dnbGVBdHRyKSAhPVxuICAgICAgICAgIHRhcmdldFRoZW1lXG4gICAgICAgICkge1xuICAgICAgICAgIHRhcmdldEVsbVxuICAgICAgICAgICAgLmNsb3Nlc3QoXCIuXCIgKyBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVySXRlbUNsYXNzKVxuICAgICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci5hY3RpdmVDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmNsb3Nlc3QoXCIuXCIgKyBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVySXRlbUNsYXNzKS5jbGFzc0xpc3QuYWRkKFxuICAgICAgICBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLmFjdGl2ZUNsYXNzXG4gICAgICApO1xuICAgICAgaWYgKENvb2tpZXMpIHtcbiAgICAgICAgQ29va2llcy5zZXQoYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci5jb29raWVOYW1lLCB0YXJnZXRUaGVtZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgaWYgKENvb2tpZXMpIHtcbiAgICBpZiAoQ29va2llcy5nZXQoYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci5jb29raWVOYW1lKSkge1xuICAgICAgdmFyIHRhcmdldEVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIFwiLlwiICtcbiAgICAgICAgICBhcHAudGhlbWVQYW5lbC5jbGFzcyArXG4gICAgICAgICAgXCIgW1wiICtcbiAgICAgICAgICBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLnRvZ2dsZUF0dHIgK1xuICAgICAgICAgIFwiXVwiICtcbiAgICAgICAgICBcIltcIiArXG4gICAgICAgICAgYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci5jbGFzc0F0dHIgK1xuICAgICAgICAgICc9XCInICtcbiAgICAgICAgICBDb29raWVzLmdldChhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLmNvb2tpZU5hbWUpICtcbiAgICAgICAgICAnXCJdJ1xuICAgICAgKTtcbiAgICAgIGlmICh0YXJnZXRFbG0pIHtcbiAgICAgICAgdGFyZ2V0RWxtLmNsaWNrKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKiAxMi4gQXBwbGljYXRpb24gQ29udHJvbGxlclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgQXBwID0gKGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICByZXR1cm4ge1xuICAgIC8vbWFpbiBmdW5jdGlvblxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5pbml0Q29tcG9uZW50KCk7XG4gICAgICB0aGlzLmluaXRTaWRlYmFyKCk7XG4gICAgfSxcbiAgICBpbml0U2lkZWJhcjogZnVuY3Rpb24oKSB7XG4gICAgICBoYW5kbGVTaWRlYmFyTWVudSgpO1xuICAgICAgaGFuZGxlU2lkZWJhclNjcm9sbE1lbW9yeSgpO1xuICAgIH0sXG4gICAgaW5pdENvbXBvbmVudDogZnVuY3Rpb24oKSB7XG4gICAgICBoYW5kbGVTY3JvbGxiYXIoKTtcbiAgICAgIGhhbmRsZVNjcm9sbFRvVG9wQnV0dG9uKCk7XG4gICAgICBoYW5kbGVTY3JvbGxUbygpO1xuICAgICAgaGFuZGxlQ2FyZEFjdGlvbigpO1xuICAgICAgaGFuZGVsVG9vbHRpcFBvcG92ZXJBY3RpdmF0aW9uKCk7XG4gICAgICBoYW5kbGVUb2dnbGVDbGFzcygpO1xuICAgICAgaGFuZGxlVGhlbWVQYW5lbCgpO1xuICAgIH0sXG4gICAgc2Nyb2xsVG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHdpbmRvdy5zY3JvbGxUbyh7IHRvcDogMCwgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gICAgfSxcbiAgfTtcbn0pKCk7XG5cbi8qIDEzLiBJbml0aWFsaXNlXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xuICBBcHAuaW5pdCgpO1xufSk7XG4iXX0=
